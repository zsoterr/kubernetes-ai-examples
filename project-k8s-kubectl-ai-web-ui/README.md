# project-k8s-kubectl-ai-web-ui
Increase kubectl's  efficiently with AI capabilities via WebUI

## What this project does
- Browser-based minimal web UI for kubectl-ai to manage Kubernetes clusters with natural language.

## What is it and why?
In this project, I will show you how to use capabilites of AI with kubectl-ai on linux, through a real-world examples. 
The goal is to:
- provide you with practical examples if you are interested in Kubernetes cluster management with AI integration,
- give you with clear instructions on how to set up the environment and how you can use it to further develop it in your own environment
- how to use the user interface with the kubectl binary file?


## Key features
- Technologies used: `Kubernetes v1.33`, `Python 3`,
- Architecture: To be determined later.
- Important files & folders:
  - `main.py` – entry point from Python  
  - `index.html` – UI / web interface 
  - `README.md` – this file  
- License: **MIT License** – see `LICENSE` file in the parent folder

## Security note
This PoC is intended for **local** use on a jump-host or admin workstation. **Do not expose it directly on the internet** without authentication/proxying and controlled firewall rules.

## Usage
1. **Pre-requisites**::
- **Ubuntu Linux**:
  ```bash
    apt install python3.12-venv
    python3 -m venv venv
    source venv/bin/activate
    pip install fastapi uvicorn[standard] jinja2
  ```  
- **Python**:
  You can use the requirements.txt in the "backend" directory if you want:
  ```bash
    pip install -r requirements.txt
  ```
- **Kubectl**:
  You must **configure** the *kubeconfig* file and ensure that **kubectl** "**works**": that means you can interact with your Kubernetes cluster with kubectl. Validate it.
- **kubectl-ai**:
  You already installed on the affected host. If not, install it now: https://github.com/GoogleCloudPlatform/kubectl-ai
- **OPENAI**:
  You already have an OPENAI API KEY (if you don't have one yet, create one).
3. **Configuation**:
- **main.py**:
  ```bash
    mkdir -p ~/kubectl-ai-web/templates && cd ~/kubectl-ai-web
  ```   
  **Create** the file with the right content (vi *~/kubectl-ai-web/main.py* ) **or** **copy** *main.py* file to this path: *~/kubectl-ai-web/main.py*
- **index.html**: \
  **Create** the file with the right content (vi *~/kubectl-ai-web/templates/index.html* ) **or** **copy** *index.html* file to this path: *~/kubectl-ai-web/templates/index.html*
5. **Start it**:
- Running FASTAPI **locally** on loopback interface of local host: \
  **Note**: change the *$YOUR-OPENAI-API-KEY* before you run these commands:
  ```bash
    cd ~/kubectl-ai-web
    source venv/bin/activate
    export OPENAI_API_KEY=$YOUR-OPENAI-API-KEY
    uvicorn main:app --host 127.0.0.1 --port 8000 &
  ``` 
6. **WebInterface**:
- Option one: \
  You **don't have graphical interface** on host where the FASTAPI is running and you want to use it "remotely":
  ```bash
    ssh -L 8000:localhost:8000 user@jump-host
   ```
  **Replace** the *user@jump-host* for yours. \
  and **open a browser** on your machine and **open this URL**: *http://localhost:8000* . \
  You will see the kubectl **web UI**, enter the prompt, "Run" and kubectl will run in the background on the jump host.
- Option two: \
  You **have graphical interface**  where the FASTAPI is running and you want to use on the same host. \
  Just **open a browser** and **open this URL**: *http://localhost:8000* . \
  You will see the kubectl **web UI**, enter the prompt, "Run" and kubectl will run in the background on the jump host.

  **Allow cluster changes**: \
  By default, it is **not possible to modify or change** the cluster status. This means, for example, that you cannot start or delete a pod.
If you want to perform such activities, you **must enable** this checkbox: "**Allow cluster changes**"

8. **Exit**: \
Close the browser and **identify** which **job** belongs to the FASTPI process:
  ```bash
    jobs
   ```
  let us **assume** that this is the output: *[1]+  Running uvicorn main:app --host 127.0.0.1 --port 8000 &* \
  **cancel** the job and use the job number (which is **1** in this case)
  ```bash
    kill -9 `jobs -p 1`
   ```

## Note
- This is the first version (v1), the goal was to have a working "demo" version: very basic, but I think it demonstrates well what it can be used for and how.
- It runs under Linux (I have validated it on Ubuntu 24.04 LTS.), on the local machine where the kubectl-ai program is installed. (not remote but you can use it remotely with ssh tunelling).
- It has a search function: you can search in the outputs (stdout and stderr), it "remembers" the last 20 commands and outputs, you can copy the command generated by the AI and use (refine) it later if needed.
- single-user environment, no permission management, no database 

It's really **just a PoC**, using an openai API with a test kubernetes cluster.

## Planned changes in the near future:
- add other providers as further  "alternative" options, currently we use this definition in the code: **kubectl-ai --llm-provider=openai --model=gpt-4.1** that means the provider and the parameters are "hard-coded"
- context-switcher (kubeconfig)
- "Generate only" vs. "Generate + Run" mode (separate button)
- saved question-answer history (simple file or SQLite)
- multi-user ennvironment,
- "real" web server, enhanced UI
- scalability,
- security and performance-related sizing and configuration
- validation of RPM-based Linux distribution
- Run as pod in the Kubernetes cluster (K8s deployment, auth, RBAC)

---------------
## Some pictures during operation:

without "Allow cluster changes" option ("read-only" mode):
<img width="699" height="801" alt="Project-kubectl-ai_ui_v1_Robert_Zsoter-2" src="https://github.com/user-attachments/assets/f5e7fc43-81a4-4ab7-9f9c-aa72619ccb68" />

and with  "Allow cluster changes" (you can make changes):

<img width="1063" height="801" alt="Project-kubectl-ai_ui_v1_Robert_Zsoter-3" src="https://github.com/user-attachments/assets/e011c66e-e4ed-49f5-a8ee-c0aee41a54a2" />


## Contributions:
This project is provided as-is, primarily for educational and reference purposes.
Feel free to fork and adapt it to your own use case.
However, I am not currently accepting external pull requests due to limited review time.
